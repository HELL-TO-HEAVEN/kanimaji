<html>
<head>
<title>Kanimaji</title>
<meta http-equiv="cache-control" content="max-age=0" />
<meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="expires" content="0" />
<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
<meta http-equiv="pragma" content="no-cache" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<script src="jquery-2.2.2.min.js"></script>
<script language="JavaScript" type="text/javascript">
function svg_loaded(){
    console.log("hello!")
    n = 3;
    svg = $(document.getElementById('mysvg').getSVGDocument())

    /* cleanup */
    svg.find('.animate, .current, .brush, .backward')
        .removeClass('animate current brush backward')

    selector = '[data-stroke="'+n+'"]'

    duration = svg.find(selector+'[data-duration]').data("duration")
    svg.find(selector)
        .addClass('animate current')
        .css("animation-duration", (duration*3) + "s")

    // animate all and 
    svg.find('[data-stroke]')
        .addClass('animate backward')
        .css("animation-duration", '1s')
    for(var i=1;i<=3;i++)
    svg.find('[data-stroke="'+i+'"]')
        .addClass('brush')
        .removeClass('backward')
        .css("animation-duration", '1s')
        
    // reset duration, if necessary
    //svg.find('[data-stroke]').css("animation-duration", '')
}
</script>
<style>
</style>
</head>
<body>
<object>
   <embed id="mysvg" src="samples/084b8_js_anim.svg" onload="javascript:svg_loaded()">
</object>
</body>
</html>